/* Hover effect */
:root {
  --elev-base:
    0 8px 20px rgba(0,0,0,.45),
    0 3px 10px rgba(0,0,0,.35),
    0 0 0 1px rgba(255,255,255,.06) inset;

  --elev-hover:
    0 22px 60px rgba(0,0,0,.60),
    0 10px 28px rgba(0,0,0,.45),
    0 0 0 1px rgba(255,255,255,.08) inset;

  --elev-down:
    0 10px 28px rgba(0,0,0,.55),
    0 4px 14px rgba(0,0,0,.38),
    0 0 0 1px rgba(255,255,255,.08) inset;
}

.u-hover-elev,
[data-hover-elev] {
  /* glow tunables */
  --hover-elev-color: var(--color-primary, #2AB3FF);
  --hover-elev-ring:  2px;
  --hover-elev-bloom: 18px;
  --hover-elev-alpha: .75;
  /* motion tunables */
  --hover-elev-translate: -4px;
  --hover-elev-scale:     1.01;

  position: relative;
  isolation: isolate;
  transform: translateZ(0);
  box-shadow: var(--elev-base);
  transition:
    box-shadow .24s cubic-bezier(.2,.6,.2,1),
    transform .18s cubic-bezier(.2,.6,.2,1),
    outline-color .18s ease,
    outline-offset .18s ease;

  &:hover,
  &:focus-within {
    transform: translateY(var(--hover-elev-translate)) scale(var(--hover-elev-scale));
    border-color: var(--hover-elev-border, var(--hover-elev-color));
    box-shadow:
      var(--elev-hover),
      0 0 calc(var(--hover-elev-bloom) * 2) var(--hover-elev-bloom)
      color-mix(in srgb, var(--hover-elev-color) calc(var(--hover-elev-alpha) * 100%), transparent);
    outline: 3px solid color-mix(in srgb, var(--hover-elev-color) 70%, transparent);
    outline-offset: 3px;
  }
}
.u-hover-elev--bordered { border: 1px solid transparent; }
.u-hover-elev--green {
  &:hover,
  &:focus-within {
    border-color: var(--color-accent,#06B6D4);
    box-shadow:
      var(--elev-hover),
      0 0 calc(var(--hover-elev-bloom) * 2) var(--hover-elev-bloom)
      color-mix(in srgb, var(--color-accent) calc(var(--hover-elev-alpha) * 100%), transparent);
    outline: 3px solid color-mix(in srgb, var(--color-accent) 70%, transparent);
  }
}

@media (prefers-reduced-motion: reduce) {
  .u-hover-elev,
  [data-hover-elev] {
    transition: box-shadow .24s ease, outline-color .18s ease, outline-offset .18s ease;
    &:hover,
    &:focus-within,
    &:active {
      transform: none;
    }
  }
}

/* Musical effect for headings */
.h-staff {
  --staff-color: color-mix(in srgb, var(--color-primary,#3DA9FF) 70%, transparent);
  --note-color:  var(--color-text,#9DFF00);
  position: relative;
  display: inline-block;
  padding-block: .1em .3em;
  isolation: isolate;
  letter-spacing: .2rem;
  font-family: var(--font-heading);

  text-shadow:
    0 0 10px color-mix(in srgb, var(--color-primary) 25%, transparent),
    0 0 22px color-mix(in srgb, var(--color-primary) 18%, transparent);
}
.h-staff::before {
  content: "";
  position: absolute;
  inset-inline: -0.25em;
  bottom: .05em;
  height: 0.9em;
  z-index: -1;
  background:
    repeating-linear-gradient(
      to bottom,
      var(--staff-color) 0 2px,
      transparent 2px 10px
    );
  mask: linear-gradient(90deg, transparent 0 4px, #000 12px calc(100% - 12px), transparent calc(100% - 4px));
  border-radius: .25rem;
  filter: blur(.2px);
}
.h-staff::after {
  content: "â™ª";
  position: absolute;
  right: -0.6em;
  bottom: .05em;
  font-size: 0.9em;
  color: var(--note-color);
  opacity: .9;
  text-shadow: 0 0 10px color-mix(in srgb, var(--note-color) 45%, transparent);
  transform-origin: 60% 80%;
  transition: transform .25s ease, opacity .2s ease;
}
.h-staff:hover::after,
.h-staff:focus-visible::after { transform: rotate(-8deg) translateY(-1px); }

@media (prefers-reduced-motion: reduce) {
  .h-staff::after { transition: none; }
}

/* Music note effect for background */
.bg-notes {
  position: fixed;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}
.bg-note {
  position: absolute;
  top: -10vh;
  transform: translate3d(0,0,0);
  font-size: var(--size, 18px);
  line-height: 1;
  color: hsl(var(--hue, 200) 90% 75%);
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.35));
  user-select: none;
  animation: note-fall var(--dur, 10s) linear var(--delay, 0s) forwards;
  mix-blend-mode: screen;
}
@keyframes note-fall {
  0% {
    transform: translate3d(0, -10vh, 0) rotate(var(--rot0, -15deg));
    opacity: 0;
  }
  10% { opacity: .35; }
  60% { opacity: .25; }
  100% {
    transform: translate3d(var(--drift, 0px), 110vh, 0) rotate(var(--rot1, 15deg));
    opacity: 0;
  }
}

@media (prefers-reduced-motion: reduce) {
  .bg-notes { display: none !important; }
}