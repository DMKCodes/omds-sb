@use "../mixins" as *;
@use "../variables" as *;

.drum-btn {
  --drum-skin:    color-mix(in srgb, var(--color-surface,#0b1020) 70%, #ffffff 8%);
  --drum-highlight: rgba(255,255,255,.25);
  --drum-shadow:    rgba(0,0,0,.55);
  --drum-rim:     color-mix(in srgb, var(--color-primary,#2AB3FF) 35%, transparent);
  --stick:        color-mix(in srgb, var(--color-highlight,#FFC400) 80%, #caa200 10%);

  position: relative;
  display: inline-grid;
  place-items: center;
  border: 0;
  text-decoration: none;
  cursor: pointer;
  border-radius: 999px;
  isolation: isolate;
  transform: translateZ(0);
  background: transparent;
  /* subtle top-down tilt for dimensionality */
  transform-style: preserve-3d;
  perspective: 600px;

  /* sizes */
  &.drum-btn--sm { width: 44px; height: 44px; }
  &.drum-btn--md { width: 56px; height: 56px; }
  &.drum-btn--lg { width: 72px; height: 72px; }

  /* focus */
  &:focus-visible {
    outline: 3px solid var(--color-accent,#2BFF88);
    outline-offset: 3px;
  }
}

/* Drum skin (top) */
.drum-btn__skin {
  position: absolute; inset: 6%;
  border-radius: 50%;
  background:
    radial-gradient(120% 90% at 30% 20%, var(--drum-highlight), transparent 45%),
    radial-gradient(100% 120% at 60% 80%, rgba(255,255,255,.06), transparent 60%),
    var(--drum-skin);
  box-shadow:
    0 10px 20px var(--drum-shadow),
    inset 0 8px 18px rgba(255,255,255,.06);
  transform: rotateX(8deg);
}

/* Rim (outer ring) */
.drum-btn__rim {
  position: absolute; inset: 0;
  border-radius: 50%;
  background:
    conic-gradient(from 0deg,
      color-mix(in srgb, var(--drum-rim) 90%, transparent) 0 8%,
      transparent 8% 92%,
      color-mix(in srgb, var(--drum-rim) 90%, transparent) 92% 100%
    ),
    radial-gradient(closest-side, transparent 78%, rgba(255,255,255,.12) 79%, rgba(0,0,0,.35) 82%, transparent 83%);
  filter: saturate(1.1);
}

/* Sticks container; we draw sticks using ::before/::after */
.drum-btn__sticks {
  position: absolute; inset: 0;
}

/* Both sticks */
.drum-btn__sticks::before,
.drum-btn__sticks::after {
  content: "";
  position: absolute;
  left: 50%; top: 50%;
  width: 62%;
  height: 4px;
  border-radius: 3px;
  background: var(--stick);
  box-shadow:
    0 1px 0 rgba(255,255,255,.15) inset,
    0 2px 6px rgba(0,0,0,.35);
  transform-origin: 80% 50%; /* pivot near the right tip */
  transition: transform .28s cubic-bezier(.2,.7,.2,1), width .2s ease;
}

// /* Drumstick tips (little round ends) */
// .drum-btn__sticks::after {
//   /* same base as ::before */
// }

/* Default state: crossed “X” */
.drum-btn__sticks::before { transform: translate(-50%, -50%) rotate(38deg); }
.drum-btn__sticks::after  { transform: translate(-50%, -50%) rotate(-38deg); }

/* Hover/focus: turn into chevron '>' by rotating & nudging toward the right */
.drum-btn:hover .drum-btn__sticks::before,
.drum-btn:focus-visible .drum-btn__sticks::before {
  transform: translate(calc(-50% + 2px), -50%) rotate(32deg);
}
.drum-btn:hover .drum-btn__sticks::after,
.drum-btn:focus-visible .drum-btn__sticks::after {
  transform: translate(calc(-50% + 2px), -50%) rotate(-32deg);
}

/* Optional: stronger hover lift */
.drum-btn:hover .drum-btn__skin { box-shadow: 0 14px 28px var(--drum-shadow), inset 0 8px 18px rgba(255,255,255,.08); }

/* Reduced motion: soften transitions */
@media (prefers-reduced-motion: reduce) {
  .drum-btn__sticks::before,
  .drum-btn__sticks::after { transition: none; }
}